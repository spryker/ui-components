<nz-select
  [(ngModel)]="mappedValue"
  (ngModelChange)="handleValueChange($event)"
  [nzShowSearch]="search"
  [nzDisabled]="disabled"
  [nzPlaceHolder]="placeholder"
  [nzMode]="multiple ? 'tags' : 'default'"
  [nzSuffixIcon]="suffixIconTpl"
  [nzNotFoundContent]="noOptionsText"
  [nzMenuItemSelectedIcon]="multiSelectOptionIconTpl"
  [nzRemoveIcon]="crossIconTpl"
  [nzAllowClear]="!disableClear"
  [nzClearIcon]="clearIconTpl"
>
  <nz-option
    *ngIf="showSelectAll"
    [nzValue]="selectAllValue"
    [nzLabel]="selectAllTitle"
  >
  </nz-option>

  <nz-option
    *ngFor="let option of mappedOptions"
    [nzValue]="option.value"
    [nzLabel]="option.label"
    [nzDisabled]="option.isDisabled"
    [nzCustomContent]="!multiple"
  >
    {{ option.label }}
    <spy-icon
      class="ant-select-dropdown-menu-item__icon--checked"
      [name]="checkIcon"
    ></spy-icon>
  </nz-option>
</nz-select>

<select
  *ngIf="multiple; else singleSelectTpl"
  class="ant-select-native"
  multiple
  [ngModel]="mappedValue"
  [name]="name"
  [disabled]="disabled"
>
  <option></option>
  <option *ngFor="let option of mappedOptions" [value]="option.value">
    {{ option.label }}
  </option>
</select>

<ng-template #singleSelectTpl>
  <select
    class="ant-select-native"
    [ngModel]="mappedValue"
    [name]="name"
    [disabled]="disabled"
  >
    <option></option>
    <option *ngFor="let option of mappedOptions" [value]="option.value">
      {{ option.label }}
    </option>
  </select>
</ng-template>

<ng-template #suffixIconTpl>
  <spy-icon class="ant-select-arrow__icon" [name]="arrowDownIcon"></spy-icon>
</ng-template>

<ng-template #crossIconTpl>
  <spy-icon
    class="ant-select-selection__choice__remove__icon"
    [name]="removeIcon"
  ></spy-icon>
</ng-template>

<ng-template #multiSelectOptionIconTpl>
  <spy-icon
    class="ant-select-dropdown-menu-item__icon--multiChecked"
    [name]="checkboxCheckedIcon"
  ></spy-icon>
  <spy-icon
    class="ant-select-dropdown-menu-item__icon--multiUnchecked"
    [name]="checkboxUncheckedIcon"
  ></spy-icon>
</ng-template>

<ng-template #clearIconTpl>
  <spy-icon
    class="ant-select-selection__clear-icon"
    [name]="removeIcon"
  ></spy-icon>
</ng-template>
