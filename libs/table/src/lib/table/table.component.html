<div class="ant-table-features">
  <div class="ant-table-features-col ant-table-features-col--static">
    <ng-container *ngIf="config.selectable">{{ selectedRows()?.length }} selected / </ng-container>
    {{ (data$ | async)?.total }} results
  </div>

  <div class="ant-table-features-col ant-table-features-col--dynamic"></div>
</div>

<nz-table nzFrontPagination="false" [nzLoading]="isLoading$ | async">
  <thead nzSingleSort="true" (nzSortChange)="updateSorting($event)">
    <tr>
      <th *ngIf="config.selectable">
        <spy-checkbox
            [(checked)]="allChecked"
            [indeterminate]="isIndeterminate"
            (checkedChange)="toggleCheckedRows()"
        ></spy-checkbox>
      </th>

      <th
          *ngFor="let column of columns$ | async; trackBy: trackByColumns"
          [nzShowSort]="column.sortable"
          [nzSortKey]="column.id"
          [nzWidth]="column.width"
      >
        {{ column.title }}
      </th>
      <th *ngIf="config?.rowActions?.length"></th>
    </tr>
  </thead>

  <tbody>
    <tr
        *ngFor="
          let data of (data$ | async)?.data;
          trackBy: trackByData;
          index as indexOfElement
        "
        [class.ant-table-row--selected]="checkedRows[indexOfElement]"
    >
      <td *ngIf="config.selectable">
        <div class="ant-table-column-inner">
          <spy-checkbox
              [(checked)]="checkedRows[indexOfElement]"
              (checkedChange)="updateCheckedRows()"
          ></spy-checkbox>
        </div>
      </td>

      <td *ngFor="let column of columns$ | async; trackBy: trackByColumns">
        <div class="ant-table-column-inner">
          <spy-table-column-renderer
              [config]="column"
              [data]="data"
              [template]="templatesObj[column.id]"
          ></spy-table-column-renderer>
        </div>
      </td>

      <td *ngIf="config?.rowActions?.length">
        <div class="ant-table-column-inner">
          DROPDOWN
          <div *ngFor="let action of config.rowActions">
              <span (click)="this.actionTriggerHandler(action, [data])"
              >DROPDOWN ITEM</span
              >
          </div>
        </div>
      </td>
    </tr>
  </tbody>
</nz-table>
