@import './table.component.theme.less';

.spy-table {
    .ant-spin {
        &-container {
            &::after {
                display: none;
            }
        }

        &-blur {
            background: none;
        }

        &-nested-loading {
            display: block;
            overflow: hidden;

            > div > .ant-spin {
                position: absolute;
                top: 0;
                left: 50%;
                transform: translateX(-50%);
            }
        }
    }

    &-initial-loading {
        .ant-spin-nested-loading {
            > div > .ant-spin {
                position: relative;
                height: @table-initial-loading-height;
            }
        }
    }
}

.ant-table {
    font: @font-default;
    background: none;
    z-index: @table-z-index;

    &-content {
        overflow-x: auto;
    }

    &-features {
        &--before-table {
            .spy-table-features-renderer__content {
                padding-bottom: @table-features-padding-vertical;

                &:empty {
                    padding-bottom: 0;
                }
            }
        }

        &--after-table {
            .spy-table-features-renderer__content {
                padding-top: @table-features-after-table-padding-top;

                &:empty {
                    padding-top: 0;
                }
            }
        }

        spy-table-features-renderer {
            display: flex;
            flex-grow: 1;
            flex-wrap: wrap;
            align-items: center;
        }
    }

    &-row {
        height: @table-row-height;
    }

    &-column-sorter-up,
    &-column-sorter-down {
        font-size: @table-column-title-font-size;
    }

    &-column-sorter-up + &-column-sorter-down {
        margin-top: @table-column-sorter-down-margin-top;
    }

    &-thead {
        & > .ant-table-row {
            height: @table-row-head-height;
        }

        & > tr > th {
            white-space: nowrap;
            color: @table-header-color;
            background: @transparent;
            border-bottom: none;
            text-transform: uppercase;

            &::before {
                display: none;
            }

            &[colspan] {
                text-align: left;
            }

            .ant-table-column-sorters {
                justify-content: flex-start;
            }

            .ant-table-column-sorter {
                display: block;
                position: relative;
                width: @table-sorts-holder-width;
                height: @table-sorts-holder-height;
                margin: 0;

                .ant-table-column-sorter-inner {
                    height: auto;
                    position: absolute;
                    top: 50%;
                    transform: translateY(-50%);
                    margin: 0;
                    right: 0;
                    color: @spy-table-header-icon-color;
                    line-height: 0;
                }
            }

            .ant-table-column-title {
                font-size: @table-column-title-font-size;
                flex-grow: 0;
            }

            .ant-checkbox-wrapper {
                position: relative;

                &::before {
                    content: '';
                    position: absolute;
                    left: 50%;
                    top: 50%;
                    transform: translate(-50%, -50%);
                    width: @table-head-checkbox-wrapper-size;
                    height: @table-head-checkbox-wrapper-size;
                    background: @table-head-checkbox-wrapper-bg;
                    border-radius: @table-checkbox-border-radius;
                }
            }
        }
    }

    &-tbody > tr {
        outline: none;
        position: relative;

        &::after {
            .transition-mixin(border-color);
            content: '';
            position: absolute;
            display: block;
            inset: @border-width-base 0;
            border-radius: @border-radius-base;
            border: @table-body-row-border-default;
            z-index: @table-after-z-index;
        }

        &:first-child::after {
            top: 0;
        }

        &:last-child::after {
            bottom: 0;
        }

        &.ant-table-row-hover,
        &:hover {
            background: none;

            &:not(.ant-table-expanded-row):not(.ant-table-row-selected) > td {
                background: none;
            }
        }

        &:hover {
            &:not(&:focus):not(.ant-table-placeholder) {
                /* stylelint-disable selector-max-pseudo-class */
                &::after {
                    border-color: @gray-light;
                }
                /* stylelint-enable */

                &.ant-table-row--selected::after {
                    border-color: @green;
                }

                &.ant-table-row--editable::after {
                    border-color: @transparent;
                }
            }
        }

        &:focus::after {
            border-color: @green;
        }
    }

    &-thead,
    &-tbody {
        & > tr {
            &:first-child > th {
                &:last-child,
                &:first-child {
                    border-radius: 0;
                }
            }

            th.ant-table-column-has-sorters,
            > th,
            > td {
                padding: 0;
                border-bottom: none;
                position: relative;

                .ant-table-column-inner {
                    padding: @table-column-inner-padding;
                    color: @table-column-body-color;
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    height: 100%;
                    z-index: @table-column-inner-z-index;

                    &::after {
                        .transition-mixin(background, border, box-shadow;);
                        content: '';
                        position: absolute;
                        top: @table-body-margin-vertical;
                        bottom: @table-body-margin-vertical;
                        left: 0;
                        width: 100%;
                        background: @table-body-row-bg;
                        border-top: @table-border-base;
                        border-bottom: @table-border-base;
                        z-index: @table-after-z-index;
                    }

                    &--align-right {
                        align-items: flex-end;
                    }
                }

                &:first-child .ant-table-column-inner::after {
                    border-radius: @table-column-first-border-radius;
                    border-left: @table-border-base;
                }

                &:last-child .ant-table-column-inner::after {
                    border-radius: @table-column-last-border-radius;
                    border-right: @table-border-base;
                }
            }

            th.ant-table-column-has-sorters,
            > th {
                &:hover {
                    background: none;
                }

                .ant-table-column-inner {
                    padding: @table-head-padding;
                    color: @table-column-head-color;
                    font-size: @table-column-title-font-size;
                }
            }

            th.ant-table-column-has-sorters {
                .ant-table-column-sorters {
                    width: 100%;
                    padding: @table-head-padding;

                    &::after {
                        .transition-mixin(background, border, box-shadow;);
                        content: '';
                        position: absolute;
                        top: @table-body-margin-vertical;
                        bottom: @table-body-margin-vertical;
                        left: 0;
                        width: 100%;
                        height: auto;
                        background: @table-body-row-bg;
                        border-top: @table-border-base;
                        border-bottom: @table-border-base;
                        z-index: @table-after-z-index;
                    }
                }

                &:first-child .ant-table-column-sorters::after {
                    border-radius: @table-column-first-border-radius;
                    border-left: @table-border-base;
                }

                &:last-child .ant-table-column-sorters::after {
                    border-radius: @table-column-last-border-radius;
                    border-right: @table-border-base;
                }

                &.ant-table-column-sort {
                    background: @transparent;
                }

                .ant-table-column-inner {
                    padding: 0;

                    &::after {
                        display: none;
                    }
                }
            }

            &.ant-table-row--with-errors > td {
                .ant-table-column-inner {
                    &::after {
                        background: @table-row-bg-with-errors;
                        border-color: @table-row-border-color-with-errors;
                    }
                }
            }

            &:first-child > td .ant-table-column-inner::after {
                top: 0;
            }

            &:last-child > td .ant-table-column-inner::after {
                bottom: 0;
            }
        }
    }

    &-header {
        background: @transparent;
    }

    &-empty {
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        font: @font-default;
        border-radius: @border-radius-base;
        background: @spy-white;
        padding: @table-empty-container-padding;
        min-height: @table-empty-container-min-height;
        color: @gray-dark;

        &__title {
            font-weight: @font-weight-semi-bold;
            font-size: @heading-5-font-size;
            letter-spacing: @letter-spacing-base;
            color: @gray-darker;

            &--spacing-bottom {
                margin-bottom: @table-empty-title-margin-bottom;
            }
        }

        &__icon {
            display: block;
            font-size: @table-empty-icon-size;
            margin-bottom: @table-empty-icon-margin-bottom;
        }
    }

    &-pagination {
        &:empty {
            display: none;
        }
    }

    .spy-chips {
        white-space: nowrap;
    }
}
