<nz-tree-select
  [nzNodes]="mappedItems"
  [nzShowSearch]="search"
  [nzDisabled]="disabled"
  [nzMultiple]="multiple"
  [nzPlaceHolder]="placeholder"
  [nzNotFoundContent]="noOptionsText"
  [nzAllowClear]="!disableClear"
  [nzMaxTagCount]="0"
  [nzMaxTagPlaceholder]="tagPlaceholder"
  [(ngModel)]="value"
  (ngModelChange)="handleValueChange($event)"
  nzDropdownClassName="spy-tree-select-dropdown"
></nz-tree-select>

<select
  *ngIf="multiple; else singleSelectTpl"
  multiple
  class="ant-select-native"
  [attr.name]="name"
  [disabled]="disabled"
>
  <option></option>
  <option
    *ngFor="let item of mappedItems"
    [value]="item.value"
    [selected]="checkSelectedState(item.value)"
  >
    {{ item.title }}
  </option>
</select>

<ng-template #singleSelectTpl>
  <select
    class="ant-select-native"
    [ngModel]="mappedValue"
    [attr.name]="name"
    [disabled]="disabled"
  >
    <option></option>
    <option *ngFor="let item of mappedItems" [value]="item.value">
      {{ item.title }}
    </option>
  </select>
</ng-template>

<ng-template #tagPlaceholder let-selectedList>{{
  selectedList | treeSelectExtractKeys | spyJoin: ', '
}}</ng-template>
