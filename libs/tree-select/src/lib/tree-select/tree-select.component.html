<nz-tree-select
  [nzNodes]="mappedItems"
  [nzShowSearch]="search"
  [nzDisabled]="disabled"
  [nzMultiple]="multiple"
  [nzPlaceHolder]="placeholder"
  [nzNotFoundContent]="noOptionsText"
  [nzAllowClear]="!disableClear"
  [nzMaxTagCount]="0"
  [nzMaxTagPlaceholder]="tagPlaceholder"
  [(ngModel)]="value"
  (ngModelChange)="valueChange.emit($event)"
  nzDropdownClassName="spy-tree-select-dropdown"
></nz-tree-select>

<select
  class="ant-select-native"
  [multiple]="multiple"
  [attr.name]="name"
  [disabled]="disabled"
>
  <option></option>
  <option
    *ngFor="let item of mappedFlatItems"
    [value]="item.value"
    [selected]="checkSelectedState | spyInvoke: item.value:multiple:value"
  >
    {{ item.title }}
  </option>
</select>

<ng-template #tagPlaceholder let-selectedList>{{
  selectedList | treeSelectExtractKeys | spyJoin: ', '
}}</ng-template>
