@import './tree-select.component.theme.less';

.spy-tree-select {
    .ant-select {
        display: block;
        height: @tree-select-component-height;
        width: @tree-select-component-width;
        position: relative;
        font: @font-default;

        &-selection-wrap {
            height: 100%;
        }

        &.ant-select-single {
            .ant-select-selector {
                border-color: @gray-light;

                &:hover {
                    border-color: @gray;
                }
            }
        }

        &-multiple,
        &-single {
            &::after {
                content: '';
                position: absolute;
                top: 50%;
                transform: translateY(-50%);
                right: @tree-select-arrow-right;
                width: @tree-select-arrow-size;
                height: @tree-select-arrow-size;
                background: @tree-select-icon-arrow-down;
                pointer-events: none;
            }

            .ant-select-selector {
                background-color: @spy-white;

                .ant-select-selection-placeholder {
                    color: @gray-dark;
                    opacity: 1;
                    right: @tree-select-placeholder-right-indent;
                }
            }
        }

        &-disabled {
            .ant-select-selector {
                background-color: @gray-lighter;
                color: @gray-dark;
            }

            &::after {
                background-image: @tree-select-icon-arrow-down-disabled;
            }
        }

        &-multiple {
            .ant-select-selector {
                padding: @tree-select-multiple-selector-padding;
                border-color: @gray-light;
                flex-wrap: nowrap;

                &:hover {
                    border-color: @gray;
                }
            }

            .ant-select-selection {
                &-item {
                    background: none;
                    border: none;
                    color: @ink;
                    display: block;
                    text-overflow: ellipsis;
                    overflow: hidden;
                    white-space: nowrap;
                    padding: 0;
                }

                &-search {
                    display: none;
                }

                &-search-input,
                &-search-mirror,
                &-placeholder {
                    transition: unset;
                }
            }
        }

        &-arrow,
        &-native {
            display: none;
        }

        &-open {
            .ant-select-selector {
                border-color: @green;
                box-shadow: @tree-select-focus-box-shadow;
            }

            .ant-select-selection-item {
                display: none;
            }

            .ant-select-selection-search {
                display: block;
                min-width: 100%;
                margin-left: 0;

                &-input,
                &-mirror {
                    color: @ink;
                }
            }
        }

        &-selection-item ~ .ant-select-clear {
            display: block;
        }

        &-clear {
            display: none;
            width: @tree-select-clear-button-size;
            height: @tree-select-clear-button-size;
            background: @tree-select-icon-remove-default;
            background-size: @tree-select-clear-button-size;
            margin-top: @tree-select-clear-button-margin-top;
            right: @tree-select-clear-button-right;

            &:hover {
                background: @tree-select-icon-remove-hovered;
            }

            .ant-select-close-icon {
                display: none;
            }
        }
    }

    .ant-tree {
        &-title {
            overflow: hidden;
            display: inline-block;
            text-overflow: ellipsis;
            white-space: nowrap;
            max-width: 100%;
        }
    }
}

.spy-tree-select-dropdown {
    &.ant-select-dropdown {
        position: relative;
        top: 100%;
        left: 0;
        width: 100%;
        border-radius: @tree-select-border-radius;
        margin: @tree-select-menu-margin;
        padding: 0;
        background-color: @spy-white;
        box-shadow: @tree-select-dropdown-box-shadow;
        font: @font-default;
    }

    .ant-select {
        &-tree {
            display: block;
            max-height: @tree-select-dropdown-menu-max-height;
            overflow-y: auto;
            border-radius: unset;

            &-treenode {
                .transition-mixin(background);
                height: @tree-select-tree-treenode-height;
                padding: @tree-select-tree-treenode-padding;
                border: @tree-select-tree-treenode-border;
                align-items: center;

                &-checkbox {
                    &-checked,
                    &-indeterminate {
                        background-color: @green-lighter;

                        .ant-select-tree-node-content-wrapper {
                            color: @green;
                        }
                    }

                    &-checked {
                        .ant-select-tree-checkbox-inner {
                            &,
                            &:hover {
                                border-color: @green;
                            }
                        }
                    }
                }

                &-disabled {
                    background: @gray-lighter;

                    &,
                    .ant-select-tree-switcher {
                        cursor: not-allowed;
                    }
                }

                &:hover:not(&-checkbox-checked) {
                    background: @gray-lighter;
                }

                .font-highlight {
                    color: @green-dark;
                }
            }

            &-checkbox {
                margin-right: @tree-select-tree-checkbox-margin-right;
                margin-top: 0;

                &::after {
                    display: none;
                }

                &-inner {
                    border-radius: @tree-select-checkbox-icon-border-radius;
                    border-color: @gray-light;
                    transition: unset;
                    width: @tree-select-checkbox-size;
                    height: @tree-select-checkbox-size;

                    &:hover {
                        border-color: @gray;
                    }

                    &::after {
                        transition: unset;
                    }
                }

                &-indeterminate {
                    .ant-select-tree-checkbox-inner {
                        background-color: @green;
                        border-color: @green;

                        &::after {
                            width: @tree-select-indeterminate-checkbox-inner-width;
                            height: @tree-select-indeterminate-checkbox-inner-height;
                            transform: @tree-select-indeterminate-checkbox-inner-transform;
                            border-radius: @tree-select-indeterminate-checkbox-inner-border-radius;
                            background-color: @spy-white;
                        }
                    }
                }
            }

            &-node {
                &-content-wrapper {
                    line-height: @tree-select-tree-node-content-wrapper-line-height;
                    color: @ink;
                    min-width: 0;
                    padding: 0;
                    flex: 1;
                    text-overflow: ellipsis;
                    overflow: hidden;
                    white-space: nowrap;
                    transition: unset;

                    &:hover {
                        background-color: @transparent;
                    }

                    &.ant-select-tree-node-selected {
                        background-color: @transparent;
                    }
                }
            }

            &-switcher {
                width: @tree-select-tree-switcher-width;

                .ant-select-tree-switcher-icon {
                    font-size: @tree-select-tree-switcher-icon-size;
                    line-height: @tree-select-tree-switcher-icon-line-height;
                    margin-left: @tree-select-tree-switcher-icon-margin-left;
                    margin-top: @tree-select-tree-switcher-icon-margin-top;
                }
            }
        }

        &-not-found {
            color: @ink;
            padding: @tree-select-tree-not-found-padding;
            display: block;
        }
    }
}
